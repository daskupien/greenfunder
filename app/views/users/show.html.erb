<div class="container-wide">
  <div class="container-general">

    <%# USER-PROFILE %>
    <div class="profile-user">
      <div class="user-header">
        <h2>Hi <%= current_user.first_name %> üëãüèº</h2>
      </div>

      <div class="user-information">
        <p><strong>Name:</strong> <%= @user.first_name %> <%= @user.last_name %></p>
        <p><strong>Email:</strong> <%= @user.email %></p>
      </div>

      <%# UPDATE-PROFILE %>
      <div class="profile-edit">
        <%= link_to "Edit Profile", edit_user_registration_path(current_user), class: "btn-normal-green" %>
      </div>

      <%# SHOW INVESTMENTS %>
      <div class="profile-investments">
        <div class="investments-header">
          <h2>My Investments</h2>
        </div>
        <div>
          <% @investments.each do |investment| %>
            <div>
              <strong>Project: </strong><%= link_to investment.project.name, project_path(investment.project) %>
              <div class="progress">
                <% current_investment_sum = investment.project.current_investment_sum
                investment_goal = investment.project.investment_goal
                @investement_percentage = current_investment_sum.to_f / investment_goal * 100.0 %>
                <div class="progress-bar bg-success" role="progressbar" style="width: <%= @investement_percentage %>%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <ul>
                <li><strong>Punchline: </strong><%= investment.project.punchline %></li>
                <li><strong>Category: </strong><%= investment.project.category %></li>
                <li><strong>My Investment: </strong><%= investment.investment_amount %> ‚Ç¨</li>
              </ul>
            </div>
          <% end %>
        </div>
      </div>

      <%# MY PROJECTS %>
      <div class="profile-projects">
        <div class="projects-header">
          <h2>My Projects</h2>
        </div>
        <div>
          <% @projects.each do |project| %>
            <div class="card-profile-project d-flex justify-content-between w-100 align-items-center">
              <div>
                <%= cl_image_tag project.image.key, crop: :fill %>
              </div>
                <div class="card-project-infos">
                  <h2><%= project.name %></h2>
                  <p><strong>Punchline:</strong> <%= project.punchline  %></p>
                  <p><strong>Category:</strong> <%= project.category %></p>
                  <p><strong>Investment Goal:</strong> <%= project.investment_goal %></p>
                </div>
              <div>
                <%= link_to "Cancel", project_path(project), class: "btn-normal-green", method: :delete, data: { confirm: "Are you sure?" } %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
