<div class="hero-banner">
  <%# SEARCHBAR #%>
  <div class="searchbar">
    <%= form_tag projects_path, class: "search-form", method: :get do %>
      <%= text_field_tag :query,
        params[:query],
        class: "search-input",
        placeholder: "Search for category..."
      %>
      <%= button_tag(type: "submit", class: "btn btn-default", data: { turbolinks: false }) do %>
        <i class="fas fa-search"></i>
      <% end %>
    <% end %>
  </div>
  <div class="hero-content">
    <h1>Green Booster</h1>
    <h3>investing green to make our world better</h3>
  </div>
  <div class="hero-buttons text-center">
    <%= link_to "Boost Now", projects_path, class: "btn-large-white btn-hero", data: { turbolinks: false } %>
    <%= link_to "Create Project", new_project_path, class: "btn-large-green btn-hero", data: { turbolinks: false } %>
  </div>
</div>

<div class="container-wide">
  <div class="container-home">
    <%# HOW INVESTING WORKS %>
    <h2 class="cards-hiw-header text-center">How To Invest</h2>

    <%# VERSION WITH CIRCLES %>
    <div class="cards-hiw-all d-flex justify-content-around row">
      <div class="card-hiw col-sm-4 col-md-3">
        <div class="card-hiw-content text-center">
          <img class="how-icon" src="https://res.cloudinary.com/rentmylife/image/upload/v1614945248/assets/01_invest_x89g8t.svg" alt="pick">
          <p class='text-center'>1. Pick a project you want to boost & choose how much you want to invest</p>
        </div>
      </div>
      <div class="card-hiw col-sm-4 col-md-3">
        <div class="card-hiw-content text-center">
          <img class="how-icon" src="https://res.cloudinary.com/rentmylife/image/upload/v1614945248/assets/02_growth_a3zmz3.svg" alt="pick">
          <p>2. Watch the progress & postive impact of the investments you made</p>
        </div>
      </div>
      <div class="card-hiw col-sm-4 col-md-3">
        <div class="card-hiw-content text-center">
          <img class="how-icon" src="https://res.cloudinary.com/rentmylife/image/upload/v1614945248/assets/03_reward_f33bux.svg" alt="pick">
          <p>3. Receive your rewards if the investment goal is reached & the project is funded</p>
        </div>
      </div>
    </div>

    <%# MAP & CONTENT %>
    <div class="card-map">
      <div class="container d-flex justify-content-between">
        <div class="row">
          <div class="col-6">
            <div class="card-map-content">
              <div class="card-map-header">
                <h2>LetÂ´s make the map green!</h2>
              </div>
              <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p>
              <p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam</p>
            </div>
            </div>
          <div class="col-6">
            <div class="card-map-image">
                <div id="map-home"
                  data-markers="<%= @markers.to_json %>"
                  data-mapbox-api-key="pk.eyJ1Ijoiam9ubmFzc29uIiwiYSI6ImNrbHRjNWw0MTE3a2wyb2xsZTZkbzN1cHEifQ.Bn8A3OsroPo72zNpSH5LxA">
                </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <%# CARDS HOME %>
  <h2 class="card-home-header text-center">Recommended Projects</h2>
  <div class="card-home-all">
    <% @projects.first(4).each do | project | %>
      <div class="card-home">
        <% if project.image.attached? %>
          <div class="card-home-image">
            <div class="picture-layer"></div>
            <%= cl_image_tag project.image.key, crop: :fill %>
          </div>
        <% else %>
          <div class="card-home-image" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://res.cloudinary.com/rentmylife/image/upload/v1614768592/assets/photo-1473973266408-ed4e27abdd47_ohveth.jpg')">
          </div>
        <% end %>
        <div class="card-content">
          <h4 class="card-title"><%= project.name %></h4>
          <div class="card-text">
            <p class="category"><i class="fas fa-seedling category-dropdown-icon"></i><%= project.category.capitalize %></p>
            <p class="address"><i class="fas fa-map-marker-alt"></i>  <%= project.address %></p>
            <h6 class="punchline">"<%= project.punchline %>"</h6>
            <p class="investment_goal"><i class="fas fa-money-bill-wave"></i> Goal: <%= humanized_money_with_symbol(project.investment_goal_cents) %> </p>
            <div class="home-progress">
              <% current_investment_sum = project.current_investment_sum_cents
              investment_goal = project.investment_goal_cents
              @investement_percentage = current_investment_sum.to_f / investment_goal * 100.0 %>
              <div class="project-progress">
                <div class="progress">
                  <div class="progress-bar"
                        role="progressbar"
                        style="width: <%= @investement_percentage %>%"
                        aria-valuenow="25"
                        aria-valuemin="0"
                        aria-valuemax="100">
                  </div>
                </div>
                <p class="investement_percentage">(<%= @investement_percentage.round %>%)</p>
              </div>
            </div>
          </div>
          <div class="text-center">
            <%= link_to "Boost Now", project_path(project), class: "btn-normal-green w-100", data: { turbolinks: false } %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <%# BAR %>
  <div class="background-image-bar"></div>
</div>
<script>
window.map.resize();
</script>
