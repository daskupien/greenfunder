<div class="container-wide">
  <div class="hero-banner">
    <%# SEARCHBAR #%>
    <div class="searchbar">
      <%= form_tag projects_path, class: "search-form", method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "search-input",
          placeholder: "Search for category..."
        %>
        <%= button_tag(type: "submit", class: "btn btn-default") do %>
          <i class="fas fa-search"></i>
        <% end %>
      <% end %>
    </div>
    <div class="hero-content">
      <h1>Green Booster</h1>
      <h3>investing green to make our world better</h3>
    </div>
    <div class="hero-buttons text-center">
      <a class="btn-large-white btn-hero" href="/projects">Invest Now</a>
      <a class="btn-large-green btn-hero" href="/projects/new">Create Project</a>
    </div>
  </div>

  <%# STATIC MAP %>
  <%# TODO Add static map with markers, user cannot do anything %>
  <%# HOW INVESTING WORKS %>
  <%# TODO add content %>
  <h2 class="cards-hiw-header text-center">How Investing Works!</h2>
  <div class="cards-hiw-all d-flex justify-content-around row">
    <div class="card-hiw col-sm-4 col-md-3">
      <div class="card-hiw-number text-center">1</div>
      <div class="card-hiw-content text-center">this is just an explain</div>
    </div>
    <div class="card-hiw col-sm-4 col-md-3">
      <div class="card-hiw-number text-center">2</div>
      <div class="card-hiw-content text-center">this is just an explain</div>
    </div>
    <div class="card-hiw col-sm-4 col-md-3">
      <div class="card-hiw-number text-center">3</div>
      <div class="card-hiw-content text-center">this is just an explain</div>
    </div>
  </div>

  <%# HOME CARDS %>
  <h2 class="card-home-header text-center">Our Recommended Projects</h2>
  <div class="card-home-all">
    <% @projects.first(4).each do | project | %>
      <div class="card-home">
        <% if project.image.attached? %>
          <div class="card-home-image">
            <div class="picture-layer"></div>
            <%= cl_image_tag project.image.key, crop: :fill %>
          </div>
        <% else %>
          <div class="card-home-image" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://res.cloudinary.com/rentmylife/image/upload/v1614768592/assets/photo-1473973266408-ed4e27abdd47_ohveth.jpg')">
          </div>
        <% end %>
        <div class="card-content">
          <div class="card-title">
            <%= project.name %>
          </div>
          <div class="card-text">
            <p class="punchline"><%= project.punchline %> </p>
            <p class="category"><strong>Category: </strong><%= project.category %> </p>
            <p class="investment_goal"><strong>Investment Goal: </strong><%= project.investment_goal %> </p>
            <div class="card-project-progress">
              <% current_investment_sum = project.current_investment_sum
              investment_goal = project.investment_goal
              @investement_percentage = current_investment_sum.to_f / investment_goal * 100.0 %>
              <div class="progress-bar bg-success"
                    role="progressbar"
                    style="width: <%= @investement_percentage %>%"
                    aria-valuenow="25"
                    aria-valuemin="0"
                    aria-valuemax="100">
              </div>
            </div>
          </div>
          <div class="text-center">
            <%= link_to "Invest now", project_path(project), class: "btn-normal-green w-100" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <%# BAR %>
  <div class="background-image-bar"></div>
</div>
